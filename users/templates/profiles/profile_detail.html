{% extends "base.html" %}

{% load i18n %}
{% load filters %}

{% block title %} {{ web_user.username }} {% if profile.full_name %} ({{ profile.full_name }}) {% endif %} on Reelphil {% endblock %}

{% block head_end %}
<script>
$(document).ready(function () {
    {% load filters %}
    data = {{profile|jsonify}};
    data.current_user = {{user|user_to_json}};
    ko.applyBindings(new ProfileModel(data), document.getElementById('profile_data'));
    activity_data = {{timeline|jsonify}};
    activity_data.current_user = {{user|user_to_json}};
    console.log(activity_data);
    ko.applyBindings(new ActivitiesViewModel(activity_data), document.getElementById('activity_data'));

});
</script>
{% endblock %}

{% block content %}

<div id='profile_data'>
    <h1>{{ web_user.username }} {% if profile.full_name %} ({{ profile.full_name }}) {% endif %} </h1>

    <ul class="nav nav-tabs">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">Tutorials</a></li>
        <li><a href="#">Practice Editor </a></li>
        <li><a href="#">Gallery</a></li>
        <li><a href="#">Contact</a></li>
    </ul>

    <div class="follow">
        <span data-bind="follow: relation()" class="btn btn-primary"></span>
    </div>

    <ul>
        <li><a href="/movies/watched/{{web_user.username}}/">Watched Movies</a></li>
        <li><a href="/movies/owned/{{web_user.username}}/">Owned Movies</a></li>
        <li><a href="/movies/liked/{{web_user.username}}/">Liked Movies</a></li>
        <li><a href="/movies/disliked/{{web_user.username}}/">Disliked Movies</a></li>
        <li><a href="/movies/favorited/{{web_user.username}}/">Favorite Movies</a></li>
    </ul>

</div>

<h4>Recent Activity</h4>

<div id="activity_data">
    {% include "activity.html" %}
</div>


{% endblock %}
